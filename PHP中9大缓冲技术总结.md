PHP中9大缓冲技术总结
1、全页面静态化缓存
也就是将页面全部生产html静态页面,用户访问时直接访问的静态页面,而不会去走php服务器解析的流程.此种方式,在cms系统中比较常见,比如dedecms;一种比较常见的实现方式是用输出缓存:
ob_start();
$content=ob_get_getcontents();
ob_end_clean();
2、页面部分缓存
此种方式,是将一个页面中不经常变的部分进行静态缓存,而经常变化的块不缓存,最后组装在一起显示;可以使用类似于ob_get_contents的方式实现,也可以使用类似ESI之类的页面片段缓存策略,使其用来做动态页面中相对静态的片段部分的缓存.
该种方式可以用于如商城中的商品页.
3、数据缓存
顾名思义,就是缓存数据的一种方式;比如,商城中的某个商品信息,当用商品ID去请求时,就会得出包括店铺信息,商品信息等数据,此时就可以将这些数据缓存到一个php文件中,文件名包含商品ID来创建一个唯一标识;下一次有人想查看这个商品是,首先就直接调用这个文件里面的信息,而不用再去数据库中查询;其实缓存文件中缓存的就是一个php数字之类;
ECMail商城系统里面就用了这种方式;
4、查询缓存
其实这跟数据缓存是一个思路,就是根据查询语言来缓存,将查询得到的数据缓存在一个文件中,下次遇到相同的查询是,就直接先从这个文件里面调数据,不会再去查数据库;但此处的缓存文件名可能就需要以查询语句为基点来建立唯一标识;
按时间变更进行缓冲
其实,这一条不是真正的缓冲方式;上面的2,3,4的缓冲技术一般都用到了时间变更判断;就是对于缓冲文件你需要设定一个有效时间,在这个有效时间内,相同的访问才会先取缓冲文件的内容,但是超过设定的缓冲时间,就需要重新从数据库中获取数据,并生产最新的缓冲文件;比如,我将我们商城的首页就是设置2个小时更新一次;
5、按内容变更进行缓冲
这个也并非独立的缓冲技术,需结合着用;就是当数据内容被修改时,即可更新缓存文件;
比如,一个人流量很大的商城,商品很多,商品表必须比较大,这表的压力也比较重;我们可以对商品显示页进行页面缓存;
当商家在后台修改这个商品的信息时,点击保存,我们同时就更新缓存文件;那么,买家访问这个商品信息时,实际上访问的是一个静态页面,而不需要再去访问数据库;
试想,如果对商品页不换存,那么每次访问一个商品都去数据库差一次,如果有10万人在线浏览商品,那服务器压力就大了.
6、内存式缓存
提到这个,可能大家想到的首先就是memcached;memcached是高性能的分布式内存缓存服务器.一般的使用目的是,使用缓存数据库查询结果,减少数据库访问次数,以提高动态web应用的速度,提高可扩展性.
它就是将需要缓存的信息,缓存到系统内存中,需要获取信息时,直接到内存中取;比较常用的方式就是key-value方式;
7、APACHE缓存模块
apache安装完以后,是不允许才cache的.如果外接了cache或squid服务器要求进行web加速的话,就需要在httpd.conf里进行设置,当然前提是在安装apache的时候要激活mod_cache的模块
8、php APC缓存扩展
PHP有一个APC缓存扩展,windows下面为php_apc.dll,需要先加载这个模块,然后是在php.ini里面进行配置
9、OPCODE缓存
首先PHP代码被解析为tokens,然后再编译为opcode码,最后执行opcode码,返回结果;所以,对于相同的PHP文件,第一次运行时可以缓存其opcode码,下次再执行这个页面时,直接会去找到缓存下的opcode码,直接执行最后一步,就不再需要中间的步骤了.比较知名的时XCacha,Turck MM Cache,PHP Accelerator等.
